(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-aed5076a"],{"001c":function(e,t,n){"use strict";var a=n("a3f4"),r=n.n(a);r.a},"0e24":function(e,t,n){e.exports=n.p+"img/icon_zhiboke@2x.75b7dab9.png"},"14c3":function(e,t,n){var a=n("c6b6"),r=n("9263");e.exports=function(e,t){var n=e.exec;if("function"===typeof n){var i=n.call(e,t);if("object"!==typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==a(e))throw TypeError("RegExp#exec called on incompatible receiver");return r.call(e,t)}},1982:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"h",(function(){return i})),n.d(t,"b",(function(){return c})),n.d(t,"n",(function(){return s})),n.d(t,"m",(function(){return o})),n.d(t,"o",(function(){return u})),n.d(t,"e",(function(){return l})),n.d(t,"p",(function(){return d})),n.d(t,"f",(function(){return p})),n.d(t,"q",(function(){return h})),n.d(t,"c",(function(){return f})),n.d(t,"l",(function(){return b})),n.d(t,"k",(function(){return v})),n.d(t,"i",(function(){return m})),n.d(t,"s",(function(){return g})),n.d(t,"j",(function(){return y})),n.d(t,"t",(function(){return w})),n.d(t,"g",(function(){return x})),n.d(t,"r",(function(){return k})),n.d(t,"d",(function(){return D}));n("99af"),n("d3b7"),n("96cf");var a=n("b32d");function r(){var e,t;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(Object(a["a"])("/content/course-category/tree-nodes"));case 2:return e=n.sent,t=e.data,n.abrupt("return",t);case 5:case"end":return n.stop()}}))}function i(){var e,t,n,r,i=arguments;return regeneratorRuntime.async((function(c){while(1)switch(c.prev=c.next){case 0:return e=i.length>0&&void 0!==i[0]?i[0]:void 0,t=i.length>1&&void 0!==i[1]?i[1]:void 0,c.next=4,regeneratorRuntime.awrap(Object(a["a"])("/content/course/list","post",e,t));case 4:return n=c.sent,r=n.data,c.abrupt("return",r);case 7:case"end":return c.stop()}}))}function c(e){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(Object(a["a"])("/content/courseaudit/commit/".concat(e),"post"));case 2:case"end":return t.stop()}}))}function s(e){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(Object(a["a"])("/content/coursepublish/".concat(e),"post"));case 2:case"end":return t.stop()}}))}function o(e){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(Object(a["a"])("/content/courseoffline/".concat(e),"get"));case 2:case"end":return t.stop()}}))}function u(e){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(Object(a["a"])("/content/course/".concat(e),"delete"));case 2:case"end":return t.stop()}}))}function l(e){var t,n;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(Object(a["a"])("/content/course/".concat(e)));case 2:return t=r.sent,n=t.data,r.abrupt("return",n);case 5:case"end":return r.stop()}}))}function d(e){var t,n,r,i;return regeneratorRuntime.async((function(c){while(1)switch(c.prev=c.next){case 0:if(void 0===e.id){c.next=8;break}return c.next=3,regeneratorRuntime.awrap(Object(a["a"])("/content/course","put",void 0,e));case 3:return t=c.sent,n=t.data,c.abrupt("return",n);case 8:return c.next=10,regeneratorRuntime.awrap(Object(a["a"])("/content/course","post",void 0,e));case 10:return r=c.sent,i=r.data,c.abrupt("return",i);case 13:case"end":return c.stop()}}))}function p(e){var t,n;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(Object(a["a"])("/content/teachplan/".concat(e,"/tree-nodes")));case 2:return t=r.sent,n=t.data,r.abrupt("return",n);case 5:case"end":return r.stop()}}))}function h(e){var t,n;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(Object(a["a"])("/content/teachplan","post",void 0,e));case 2:return t=r.sent,n=t.data,r.abrupt("return",n);case 5:case"end":return r.stop()}}))}function f(e){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(Object(a["a"])("/content/teachplan/".concat(e),"delete"));case 2:case"end":return t.stop()}}))}function b(e){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(Object(a["a"])("/content/teachplan/moveup/".concat(e),"post"));case 2:case"end":return t.stop()}}))}function v(e){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(Object(a["a"])("/content/teachplan/movedown/".concat(e),"post"));case 2:case"end":return t.stop()}}))}function m(e,t,n){return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(Object(a["a"])("/content/teachplan/association/media","post",void 0,{mediaId:e,fileName:t,teachplanId:n}));case 2:case"end":return r.stop()}}))}function g(e,t,n){return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(Object(a["a"])("/content/teachplan/work/association","post",void 0,{teachplanId:e,workId:t,workTitle:n}));case 2:case"end":return r.stop()}}))}function y(e,t,n){return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(Object(a["a"])("/content/teachplan/association/media/".concat(e,"/").concat(t),"delete",{}));case 2:case"end":return n.stop()}}))}function w(e,t){return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(Object(a["a"])("/content/teachplan/work/".concat(e),"delete",{courseBaseId:t}));case 2:case"end":return n.stop()}}))}function x(e){var t,n,r;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,regeneratorRuntime.awrap(Object(a["a"])("/content/courseTeacher/list/".concat(e)));case 2:for(r in t=i.sent,n=t.data,n)n[r].photograph&&(n[r].photograph="".concat("http://www.yefan.xyz")+n[r].photograph);return i.abrupt("return",n);case 6:case"end":return i.stop()}}))}function k(e){var t,n;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(Object(a["a"])("/content/courseTeacher","post",void 0,e));case 2:return t=r.sent,n=t.data,r.abrupt("return",n);case 5:case"end":return r.stop()}}))}function D(e,t){return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(Object(a["a"])("/content/courseTeacher/course/".concat(e,"/").concat(t),"delete"));case 2:case"end":return n.stop()}}))}},"2a07":function(e,t,n){"use strict";var a=n("d4ac"),r=n.n(a);r.a},"44b5":function(e,t,n){"use strict";var a=n("ecf5"),r=n.n(a);r.a},4586:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"clouse-type",class:{selected:e.addtype==e.syncSelectedTypeCode},on:{click:e.handleTypeSelected}},[a("div",{staticClass:"icon"},["200003"==e.addtype?a("img",{attrs:{src:n("0e24")}}):e._e(),"200002"==e.addtype?a("img",{attrs:{src:n("c422")}}):e._e()]),a("div",{staticClass:"title"},[e._v(e._s(e.title))])])},r=[],i=n("9f12"),c=n("53fe"),s=n("8b83"),o=n("c65a"),u=n("c03e"),l=n("9ab4"),d=n("60a3"),p=function(e){function t(){return Object(i["a"])(this,t),Object(s["a"])(this,Object(o["a"])(t).apply(this,arguments))}return Object(u["a"])(t,e),Object(c["a"])(t,[{key:"handleTypeSelected",value:function(){this.syncSelectedTypeCode=this.addtype}}]),t}(d["e"]);l["a"]([Object(d["d"])("selectedTypeCode",{type:String,default:"zhibo"})],p.prototype,"syncSelectedTypeCode",void 0),l["a"]([Object(d["c"])({type:String,default:"200003"})],p.prototype,"addtype",void 0),l["a"]([Object(d["c"])({type:String,default:""})],p.prototype,"title",void 0),p=l["a"]([Object(d["a"])({name:"CourseAddTypeItem"})],p);var h=p,f=h,b=(n("2a07"),n("2877")),v=Object(b["a"])(f,a,r,!1,null,"7eaa2c5d",null);t["a"]=v.exports},"481e":function(e,t,n){"use strict";n.d(t,"i",(function(){return r})),n.d(t,"g",(function(){return i})),n.d(t,"a",(function(){return c})),n.d(t,"f",(function(){return s})),n.d(t,"e",(function(){return o})),n.d(t,"d",(function(){return u})),n.d(t,"h",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"b",(function(){return p}));var a=n("b2e1"),r=(Object(a["b"])("000"),Object(a["b"])("001")),i=Object(a["b"])("002"),c=Object(a["b"])("202"),s=Object(a["b"])("200"),o=Object(a["b"])("203"),u=Object(a["b"])("204"),l=Object(a["b"])("600"),d=Object(a["b"])("306"),p=Object(a["b"])("201")},"48fb":function(e,t,n){},"509c":function(e,t,n){"use strict";var a=n("48fb"),r=n.n(a);r.a},5319:function(e,t,n){"use strict";var a=n("d784"),r=n("825a"),i=n("7b0b"),c=n("50c4"),s=n("a691"),o=n("1d80"),u=n("8aa5"),l=n("14c3"),d=Math.max,p=Math.min,h=Math.floor,f=/\$([$&'`]|\d\d?|<[^>]*>)/g,b=/\$([$&'`]|\d\d?)/g,v=function(e){return void 0===e?e:String(e)};a("replace",2,(function(e,t,n){return[function(n,a){var r=o(this),i=void 0==n?void 0:n[e];return void 0!==i?i.call(n,r,a):t.call(String(r),n,a)},function(e,i){var o=n(t,e,this,i);if(o.done)return o.value;var h=r(e),f=String(this),b="function"===typeof i;b||(i=String(i));var m=h.global;if(m){var g=h.unicode;h.lastIndex=0}var y=[];while(1){var w=l(h,f);if(null===w)break;if(y.push(w),!m)break;var x=String(w[0]);""===x&&(h.lastIndex=u(f,c(h.lastIndex),g))}for(var k="",D=0,O=0;O<y.length;O++){w=y[O];for(var I=String(w[0]),j=d(p(s(w.index),f.length),0),R=[],S=1;S<w.length;S++)R.push(v(w[S]));var _=w.groups;if(b){var C=[I].concat(R,j,f);void 0!==_&&C.push(_);var T=String(i.apply(void 0,C))}else T=a(I,f,j,R,_,i);j>=D&&(k+=f.slice(D,j)+T,D=j+I.length)}return k+f.slice(D)}];function a(e,n,a,r,c,s){var o=a+e.length,u=r.length,l=b;return void 0!==c&&(c=i(c),l=f),t.call(s,l,(function(t,i){var s;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return n.slice(0,a);case"'":return n.slice(o);case"<":s=c[i.slice(1,-1)];break;default:var l=+i;if(0===l)return t;if(l>u){var d=h(l/10);return 0===d?t:d<=u?void 0===r[d-1]?i.charAt(1):r[d-1]+i.charAt(1):t}s=r[l-1]}return void 0===s?"":s}))}}))},"5def":function(e,t,n){},6547:function(e,t,n){var a=n("a691"),r=n("1d80"),i=function(e){return function(t,n){var i,c,s=String(r(t)),o=a(n),u=s.length;return o<0||o>=u?e?"":void 0:(i=s.charCodeAt(o),i<55296||i>56319||o+1===u||(c=s.charCodeAt(o+1))<56320||c>57343?e?s.charAt(o):i:e?s.slice(o,o+2):c-56320+(i-55296<<10)+65536)}};e.exports={codeAt:i(!1),charAt:i(!0)}},"67ef":function(e,t,n){"use strict";var a=n("5def"),r=n.n(a);r.a},7156:function(e,t,n){var a=n("861d"),r=n("d2bb");e.exports=function(e,t,n){var i,c;return r&&"function"==typeof(i=t.constructor)&&i!==n&&a(c=i.prototype)&&c!==n.prototype&&r(e,c),e}},"72e4":function(e,t,n){"use strict";var a=n("b1be"),r=n.n(a);r.a},"8aa5":function(e,t,n){"use strict";var a=n("6547").charAt;e.exports=function(e,t,n){return t+(n?a(e,t).length:1)}},"8ec0":function(e,t,n){},9263:function(e,t,n){"use strict";var a=n("ad6d"),r=RegExp.prototype.exec,i=String.prototype.replace,c=r,s=function(){var e=/a/,t=/b*/g;return r.call(e,"a"),r.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),o=void 0!==/()??/.exec("")[1],u=s||o;u&&(c=function(e){var t,n,c,u,l=this;return o&&(n=new RegExp("^"+l.source+"$(?!\\s)",a.call(l))),s&&(t=l.lastIndex),c=r.call(l,e),s&&c&&(l.lastIndex=l.global?c.index+c[0].length:t),o&&c&&c.length>1&&i.call(c[0],n,(function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(c[u]=void 0)})),c}),e.exports=c},a1f3:function(e,t,n){},a3c5:function(e,t,n){"use strict";var a=n("8ec0"),r=n.n(a);r.a},a3f4:function(e,t,n){},a9e3:function(e,t,n){"use strict";var a=n("83ab"),r=n("da84"),i=n("94ca"),c=n("6eeb"),s=n("5135"),o=n("c6b6"),u=n("7156"),l=n("c04e"),d=n("d039"),p=n("7c73"),h=n("241c").f,f=n("06cf").f,b=n("9bf2").f,v=n("58a8").trim,m="Number",g=r[m],y=g.prototype,w=o(p(y))==m,x=function(e){var t,n,a,r,i,c,s,o,u=l(e,!1);if("string"==typeof u&&u.length>2)if(u=v(u),t=u.charCodeAt(0),43===t||45===t){if(n=u.charCodeAt(2),88===n||120===n)return NaN}else if(48===t){switch(u.charCodeAt(1)){case 66:case 98:a=2,r=49;break;case 79:case 111:a=8,r=55;break;default:return+u}for(i=u.slice(2),c=i.length,s=0;s<c;s++)if(o=i.charCodeAt(s),o<48||o>r)return NaN;return parseInt(i,a)}return+u};if(i(m,!g(" 0o1")||!g("0b1")||g("+0x1"))){for(var k,D=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof D&&(w?d((function(){y.valueOf.call(n)})):o(n)!=m)?u(new g(x(t)),n,D):x(t)},O=a?h(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),I=0;O.length>I;I++)s(g,k=O[I])&&!s(D,k)&&b(D,k,f(g,k));D.prototype=y,y.constructor=D,c(r,m,D)}},aa37:function(e,t,n){"use strict";var a=n("b7a0"),r=n.n(a);r.a},ac1f:function(e,t,n){"use strict";var a=n("23e7"),r=n("9263");a({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},ad6d:function(e,t,n){"use strict";var a=n("825a");e.exports=function(){var e=a(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},aeab:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"e",(function(){return c})),n.d(t,"d",(function(){return s})),n.d(t,"a",(function(){return o}));n("d3b7"),n("96cf");var a=n("b32d");function r(e,t){var n,r;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,regeneratorRuntime.awrap(Object(a["a"])("/media/files","post",e,t));case 2:return n=i.sent,r=n.data,i.abrupt("return",r);case 5:case"end":return i.stop()}}))}function i(e){var t,n;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(Object(a["a"])("/media/media/vod-token","post",null,e));case 2:return t=r.sent,n=t.data,r.abrupt("return",n);case 5:case"end":return r.stop()}}))}function c(e){var t,n;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(Object(a["a"])("/media/media","post",null,e));case 2:return t=r.sent,n=t.data,r.abrupt("return",n);case 5:case"end":return r.stop()}}))}function s(e){var t,n;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(Object(a["a"])("/media/preview/".concat(e),"get"));case 2:return t=r.sent,n=t.data,r.abrupt("return",n);case 5:case"end":return r.stop()}}))}function o(e){var t,n;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(Object(a["a"])("/media/".concat(e),"delete"));case 2:return t=r.sent,n=t.data,r.abrupt("return",n);case 5:case"end":return r.stop()}}))}},af08:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-upload",{class:{disabled:e.uploadDisabled},attrs:{action:"","list-type":"picture-card",accept:".jpg, .png, .bmp","file-list":e.fileList,"before-upload":e.handleBeforeUpload,"on-success":e.handleUploadSuccess,"on-error":e.handleUploadError,action:"/api/media/upload/coursefile",name:"filedata","on-preview":e.handleOnPreview,"on-remove":e.handleOnRemove}},[n("i",{staticClass:"el-icon-plus"}),n("div",{staticClass:"el-upload__tip",staticStyle:{"line-height":"20px"},attrs:{slot:"tip"},slot:"tip"},[e._t("default"),n("br"),e._v("文件小于2M "),n("br"),e._v("支持JPG/PNG/BMP等格式图片 ")],2)]),n("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("img",{attrs:{width:"100%",src:e.syncedImageUrl,alt:""}})])],1)},r=[],i=(n("99af"),n("baa5"),n("b0c0"),n("d3b7"),n("96cf"),n("9f12")),c=n("53fe"),s=n("8b83"),o=n("c65a"),u=n("c03e"),l=n("9ab4"),d=n("60a3"),p=n("cea2"),h=n("f727"),f=function(e){function t(){var e;return Object(i["a"])(this,t),e=Object(s["a"])(this,Object(o["a"])(t).apply(this,arguments)),e.dialogVisible=!1,e.fileList=[],e}return Object(u["a"])(t,e),Object(c["a"])(t,[{key:"onImageUrlChanged",value:function(e,t){this.fileList=e?[{url:e}]:[]}},{key:"handleBeforeUpload",value:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/bmp"===e.type,n=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG/PNG/BMP 格式!"),n||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&n}},{key:"handleUploadSuccess",value:function(e,t){this.syncedImageUrl="".concat("http://www.yefan.xyz")+e.url,console.log(e+e.url)}},{key:"handleUploadError",value:function(e){console.log("上传失败:"+e.errMessage)}},{key:"handleHttpRequest",value:function(e){var t=e.file,n=t.name,a=n.lastIndexOf(".");n.substr(a);this.qiniuyunUpload(t)}},{key:"qiniuyunUpload",value:function(e){var t,n,a,r,i,c,s,o,u,l=this;return regeneratorRuntime.async((function(d){while(1)switch(d.prev=d.next){case 0:return d.next=2,regeneratorRuntime.awrap(Object(h["a"])());case 2:t=d.sent,n=t.qnToken,a={useCdnDomain:!0,region:null},r={fname:"",params:{},mimeType:null},i=t.key,c=function(e){var t=e.total,n=Math.ceil(t.percent);console.log("媒资上传到七牛云进度...".concat(n,"%")),console.log(e)},s=function(e){console.log("媒资上传到七牛云失败..."),console.log(e)},o=function(e){l.syncedImageUrl="http://".concat(t.domain,"/").concat(t.key),console.log("媒资上传到七牛云完成..."),console.log(e)},u=p["upload"](e,i,n,r,a),u.subscribe(c,s,o),console.log("媒资上传到七牛云开始...");case 13:case"end":return d.stop()}}))}},{key:"handleOnPreview",value:function(e){this.dialogVisible=!0}},{key:"handleOnRemove",value:function(e,t){this.syncedImageUrl=""}},{key:"uploadDisabled",get:function(){return this.fileList.length>0}}]),t}(d["e"]);l["a"]([Object(d["d"])("imageUrl",{type:String,required:!1,default:""})],f.prototype,"syncedImageUrl",void 0),l["a"]([Object(d["f"])("syncedImageUrl")],f.prototype,"onImageUrlChanged",null),f=l["a"]([d["a"]],f);var b=f,v=b,m=(n("001c"),n("2877")),g=Object(m["a"])(v,a,r,!1,null,null,null);t["a"]=g.exports},b1be:function(e,t,n){},b7a0:function(e,t,n){},bb7f:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"workspace"},[n("div",{staticClass:"banner"},[n("span",{staticClass:"primary-title"},[e._v(e._s(e.title))])]),n("div",{staticClass:"steps"},[n("div",{staticClass:"nav"},[n("el-steps",{attrs:{active:e.stepsActive,simple:""}},[n("el-step",{attrs:{title:"基本信息"}},[n("template",{slot:"icon"},[e._v("1")])],2),n("el-step",{attrs:{title:"课程大纲"}},[n("template",{slot:"icon"},[e._v("2")])],2),n("el-step",{attrs:{title:"教师设置"}},[n("template",{slot:"icon"},[e._v("3")])],2)],1)],1),n("div",{staticClass:"body"},[n("CourseAddStep1BaseInfo",{directives:[{name:"show",rawName:"v-show",value:0===e.stepsActive,expression:"stepsActive === 0"}],ref:"step1",attrs:{courseBaseId:e.courseBaseId,teachmode:e.teachmode},on:{"update:courseBaseId":function(t){e.courseBaseId=t},"update:course-base-id":function(t){e.courseBaseId=t}}}),n("CourseAddStep2Outline",{directives:[{name:"show",rawName:"v-show",value:1===e.stepsActive,expression:"stepsActive === 1"}],ref:"step2",attrs:{courseBaseId:e.courseBaseId,teachmode:e.teachmode}}),n("CourseAddStep3Teacher",{directives:[{name:"show",rawName:"v-show",value:2===e.stepsActive,expression:"stepsActive === 2"}],ref:"step3",attrs:{courseBaseId:e.courseBaseId}})],1),n("div",{staticClass:"footer"},[e.stepsActive>0?n("el-button",{on:{click:e.handlePrev}},[e._v("上一步")]):e._e(),n("el-button",{attrs:{type:"primary"},on:{click:e.handleNext}},[0==e.stepsActive||1==e.stepsActive?[e._v("保存并进行下一步")]:2==e.stepsActive?[e._v("保存")]:e._e()],2)],1)])])},r=[],i=(n("a9e3"),n("d3b7"),n("96cf"),n("9f12")),c=n("53fe"),s=n("8b83"),o=n("c65a"),u=n("c03e"),l=n("9ab4"),d=n("60a3"),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"step-body"},[e.baseInfoData?n("el-form",{ref:"form",attrs:{model:e.baseInfoData,rules:e.rules,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"课程名称：",prop:"name"}},[n("el-input",{model:{value:e.baseInfoData.name,callback:function(t){e.$set(e.baseInfoData,"name",t)},expression:"baseInfoData.name"}})],1),n("el-form-item",{attrs:{label:"课程标签：",prop:"tags"}},[n("el-input",{model:{value:e.baseInfoData.tags,callback:function(t){e.$set(e.baseInfoData,"tags",t)},expression:"baseInfoData.tags"}})],1),n("el-form-item",{attrs:{label:"课程分类：",prop:"uiCategoryTreeSelected"}},[e.categoryTreeData.length>0?n("el-cascader",{attrs:{options:e.categoryTreeData,props:e.defaultProps},on:{change:e.handleCategoryTreeChange},model:{value:e.baseInfoData.uiCategoryTreeSelected,callback:function(t){e.$set(e.baseInfoData,"uiCategoryTreeSelected",t)},expression:"baseInfoData.uiCategoryTreeSelected"}}):e._e()],1),n("el-form-item",{attrs:{label:"课程等级：",prop:"grade"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.baseInfoData.grade,callback:function(t){e.$set(e.baseInfoData,"grade",t)},expression:"baseInfoData.grade"}},e._l(e.gradeData,(function(e){return n("el-option",{key:e.code,attrs:{label:e.desc,value:e.code}})})),1)],1),n("el-form-item",{attrs:{label:"课程简介："}},[n("el-input",{attrs:{type:"textarea",rows:5},model:{value:e.baseInfoData.description,callback:function(t){e.$set(e.baseInfoData,"description",t)},expression:"baseInfoData.description"}})],1),n("el-form-item",{attrs:{label:"适用人群：",prop:"users"}},[n("el-input",{attrs:{type:"textarea",rows:5},model:{value:e.baseInfoData.users,callback:function(t){e.$set(e.baseInfoData,"users",t)},expression:"baseInfoData.users"}})],1),n("el-form-item",{attrs:{label:"课程封面：",prop:"pic"}},[n("common-entering-step2-upload-image",{attrs:{imageUrl:e.baseInfoData.pic},on:{"update:imageUrl":function(t){return e.$set(e.baseInfoData,"pic",t)},"update:image-url":function(t){return e.$set(e.baseInfoData,"pic",t)}}},[e._v(" 图片要求 点击查看课程封面模版规范 "),n("br"),e._v("尺寸大于1080*608 分辨率小于96dpi ")])],1),n("el-form-item",{attrs:{label:"课程类型：",prop:"charge"}},[e._l(e.chargeData,(function(t){return[n("el-radio",{key:t.code,attrs:{label:t.code},model:{value:e.baseInfoData.charge,callback:function(t){e.$set(e.baseInfoData,"charge",t)},expression:"baseInfoData.charge"}},[e._v(e._s(t.desc))])]}))],2),n("el-form-item",{attrs:{label:"原价：",prop:"originalPrice"}},[n("el-input",{staticStyle:{width:"150px"},model:{value:e.baseInfoData.originalPrice,callback:function(t){e.$set(e.baseInfoData,"originalPrice",t)},expression:"baseInfoData.originalPrice"}})],1),n("el-form-item",{attrs:{label:"现价：",prop:"price"}},[n("el-input",{staticStyle:{width:"150px"},model:{value:e.baseInfoData.price,callback:function(t){e.$set(e.baseInfoData,"price",t)},expression:"baseInfoData.price"}})],1),n("el-form-item",{attrs:{label:"咨询QQ：",prop:"qq"}},[n("el-input",{staticStyle:{width:"150px"},model:{value:e.baseInfoData.qq,callback:function(t){e.$set(e.baseInfoData,"qq",t)},expression:"baseInfoData.qq"}})],1),n("el-form-item",{attrs:{label:"微信号：",prop:"wechat"}},[n("el-input",{staticStyle:{width:"150px"},model:{value:e.baseInfoData.wechat,callback:function(t){e.$set(e.baseInfoData,"wechat",t)},expression:"baseInfoData.wechat"}})],1),n("el-form-item",{attrs:{label:"电话：",prop:"phone"}},[n("el-input",{staticStyle:{width:"150px"},model:{value:e.baseInfoData.phone,callback:function(t){e.$set(e.baseInfoData,"phone",t)},expression:"baseInfoData.phone"}})],1),n("el-form-item",{attrs:{label:"有效期(天)：",prop:"validDays"}},[n("el-input",{staticStyle:{width:"150px"},model:{value:e.baseInfoData.validDays,callback:function(t){e.$set(e.baseInfoData,"validDays",t)},expression:"baseInfoData.validDays"}})],1)],1):e._e()],1)},h=[],f=(n("ac1f"),n("5319"),n("481e")),b=n("1982"),v=n("af08"),m=function(e){function t(){var e;return Object(i["a"])(this,t),e=Object(s["a"])(this,Object(o["a"])(t).call(this)),e.categoryTreeData=[],e.defaultProps={children:"childrenTreeNodes",value:"id",label:"label"},e.gradeData=f["d"],e.chargeData=f["b"],e.rules={name:[{required:!0,message:"请输入课程名称",trigger:"blur"}],uiCategoryTreeSelected:[{required:!0,message:"请选择课程分类",trigger:"change"}],charge:[{required:!0,message:"请输入收费规则",trigger:"blur"}],grade:[{required:!0,message:"请输入课程等级",trigger:"blur"}],users:[{required:!0,message:"请输入适用人群",trigger:"blur"}]},e.baseInfoData={charge:"201000",price:0,qq:"",wechat:"",phone:"",validDays:365,mt:"",st:"",name:"",pic:"",teachmode:e.teachmode,users:"",tags:"",grade:"",objectives:"",uiCategoryTreeSelected:[]},e}return Object(u["a"])(t,e),Object(c["a"])(t,[{key:"getData",value:function(){var e;return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:if(0==this.syncCourseBaseId){t.next=7;break}return t.next=3,regeneratorRuntime.awrap(Object(b["e"])(this.syncCourseBaseId));case 3:e=t.sent,e.uiCategoryTreeSelected=[e.mt,e.st],this.baseInfoData=e,this.baseInfoData.pic="".concat("http://www.yefan.xyz")+this.baseInfoData.pic;case 7:case"end":return t.stop()}}),null,this)}},{key:"saveData",value:function(){var e=this;return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){var a,r;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,regeneratorRuntime.awrap(e.validateForm());case 2:if(a=i.sent,!a){i.next=11;break}return e.baseInfoData.pic=e.baseInfoData.pic.replace("".concat("http://www.yefan.xyz"),""),i.next=7,regeneratorRuntime.awrap(Object(b["p"])(e.baseInfoData));case 7:r=i.sent,void 0!==r.id&&(e.syncCourseBaseId=r.id,t()),i.next=13;break;case 11:e.$message.error("请正确输入表单内容"),n();case 13:case"end":return i.stop()}}))})));case 1:case"end":return t.stop()}}))}},{key:"validateForm",value:function(){var e=this;return new Promise((function(t){var n=e.$refs["form"];n.validate((function(e){return t(e)}))}))}},{key:"created",value:function(){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(Object(b["a"])());case 2:this.categoryTreeData=e.sent;case 3:case"end":return e.stop()}}),null,this)}},{key:"handleCategoryTreeChange",value:function(e){console.log(e),this.baseInfoData.mt=e[0],this.baseInfoData.st=e[1]}}]),t}(d["e"]);l["a"]([Object(d["d"])("courseBaseId",{})],m.prototype,"syncCourseBaseId",void 0),l["a"]([Object(d["c"])({type:String})],m.prototype,"teachmode",void 0),m=l["a"]([Object(d["a"])({name:"CourseAddStep1BaseInfo",components:{CommonEnteringStep2UploadImage:v["a"]}})],m);var g=m,y=g,w=(n("44b5"),n("2877")),x=Object(w["a"])(y,p,h,!1,null,"7c3ad5a0",null),k=x.exports,D=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"step-body"},[n("div",{staticClass:"bar"},[n("div",{staticClass:"title"},[e._v("任务总数："+e._s(e.outlineData.length))]),n("el-button",{staticClass:"el-button",attrs:{size:"medium",plain:""},on:{click:e.handleAddChapter}},[e._v("+添加章")])],1),n("div",{staticClass:"outline"},[e.outlineData.teachPlanTreeNodes?n("el-tree",{attrs:{data:e.outlineData.teachPlanTreeNodes,"node-key":"teachPlanId",props:e.defaultProps,"default-expanded-keys":e.outlineData.teachPlanTreeNodes.map((function(e){return e.teachPlanId}))},scopedSlots:e._u([{key:"default",fn:function(t){t.node;var a=t.data;return[n("div",{staticClass:"tree-node",class:{ischild:"2"==a.grade},on:{mousemove:function(e){a.ctlBarShow=!0},mouseleave:function(e){a.ctlBarShow=!1}}},[n("div",{staticClass:"icon"}),n("div",{staticClass:"operate"},[n("div",{staticClass:"title",on:{click:function(t){return t.stopPropagation(),e.handleEditTitle(a)}}},[a.ctlEditTitle?n("input",{directives:[{name:"focus",rawName:"v-focus"},{name:"model",rawName:"v-model",value:a.pname,expression:"data.pname"}],staticStyle:{width:"280px",height:"30px"},domProps:{value:a.pname},on:{keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;a.ctlEditTitle=!1},blur:function(t){return e.handleEditTitleBlue(a)},input:function(t){t.target.composing||e.$set(a,"pname",t.target.value)}}}):n("span",[e._v(" "+e._s(a.pname)+" ")])]),"2"==a.grade?n("div",{staticClass:"preview"},[n("el-checkbox",{attrs:{"true-label":"1","false-label":"0"},on:{change:function(t){return e.handleChangeIsPreview(a)}},model:{value:a.isPreview,callback:function(t){e.$set(a,"isPreview",t)},expression:"data.isPreview"}},[e._v("免费")])],1):e._e(),"2"==a.grade&&"200003"==e.teachmode?n("div",{staticClass:"submit-time"},[n("el-date-picker",{attrs:{type:"datetime",placeholder:"选择开始时间","default-time":"12:00:00",clearable:!1,"value-format":"yyyy-MM-dd HH:mm:ss"},on:{change:function(t){return e.handleChangePublishTime(a)}},model:{value:a.startTime,callback:function(t){e.$set(a,"startTime",t)},expression:"data.startTime"}}),e._v("~ "),n("el-date-picker",{attrs:{type:"datetime",placeholder:"选择结束时间","default-time":"12:00:00",clearable:!1,"value-format":"yyyy-MM-dd HH:mm:ss"},on:{change:function(t){return e.handleChangePublishTime(a)}},model:{value:a.endTime,callback:function(t){e.$set(a,"endTime",t)},expression:"data.endTime"}})],1):e._e(),"2"==a.grade?n("div",{staticClass:"media-file"},[null!=a.teachplanMedia&&null!=a.teachplanMedia.mediaFilename&&""!=a.teachplanMedia.mediaFilename?n("el-link",{attrs:{icon:"el-icon-delete",underline:!1},on:{click:function(t){return e.handleDeleteMedia(a)}}},[e._v(e._s(a.teachplanMedia.mediaFilename))]):null!=a.work&&""!=a.work.workTitle?n("el-link",{attrs:{icon:"el-icon-delete",underline:!1},on:{click:function(t){return e.handleDeleteWork(a)}}},[e._v(e._s(a.work.workTitle))]):e._e()],1):e._e(),"1"==a.grade?n("div",{staticClass:"buttons"},[n("el-button",{attrs:{type:"text"},on:{click:function(t){return t.stopPropagation(),e.handleAddSection(a.teachPlanTreeNodes,a.id)}}},[e._v("添加小节")]),n("el-button",{attrs:{type:"text"},on:{click:function(t){return t.stopPropagation(),e.handleDeleteNode(a.id)}}},[e._v("删除本章")]),n("el-button",{attrs:{type:"text"},on:{click:function(t){return t.stopPropagation(),e.moveUP(a.id)}}},[e._v("上移")]),n("el-button",{attrs:{type:"text"},on:{click:function(t){return t.stopPropagation(),e.moveDown(a.id)}}},[e._v("下移")])],1):"2"==a.grade?n("div",{staticClass:"buttons"},["200002"==e.teachmode?[n("el-button",{attrs:{type:"text"},on:{click:function(t){return t.stopPropagation(),e.handleSelectVideo(a)}}},[e._v("添加视频")])]:e._e(),n("el-button",{attrs:{type:"text"},on:{click:function(t){return t.stopPropagation(),e.handleDeleteNode(a.id)}}},[e._v("删除")]),n("el-button",{attrs:{type:"text"},on:{click:function(t){return t.stopPropagation(),e.moveUP(a.id)}}},[e._v("上移")]),n("el-button",{attrs:{type:"text"},on:{click:function(t){return t.stopPropagation(),e.moveDown(a.id)}}},[e._v("下移")])],2):e._e()])])]}}],null,!1,619108508)}):e._e(),n("OutlineSelectDialog",{ref:"outlineSelectDialog",attrs:{dialogVisible:e.mediaDialogVisible,type:e.selectType,title:e.selectTypeTitle},on:{"update:dialogVisible":function(t){e.mediaDialogVisible=t},"update:dialog-visible":function(t){e.mediaDialogVisible=t},onSelected:e.onRecvSelectedValue}})],1)])},O=[],I=(n("d81d"),n("c1df")),j=n.n(I),R=n("2fe1"),S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:e.title,width:"500px",visible:e.syncDialogVisible},on:{"update:visible":function(t){e.syncDialogVisible=t}}},[n("div",{staticClass:"types"},[n("el-select",{attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入关键词","remote-method":e.remoteQuery,loading:e.loading},model:{value:e.selValue,callback:function(t){e.selValue=t},expression:"selValue"}},[void 0===e.options.items||"video"!==e.type&&"doc"!==e.type?e._e():e._l(e.options.items,(function(e){return n("el-option",{key:e.id,attrs:{label:e.filename,value:e.id}})})),void 0!==e.options.items&&"work"===e.type?e._l(e.options.items,(function(e){return n("el-option",{key:e.workId,attrs:{label:e.title,value:e.workId}})})):e._e()],2)],1),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.handleCancel}},[e._v("取消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("提交")])],1)])},_=[],C=(n("4de4"),n("4586")),T=n("aeab"),$=n("c910"),N=function(e){function t(){var e;return Object(i["a"])(this,t),e=Object(s["a"])(this,Object(o["a"])(t).apply(this,arguments)),e.loading=!1,e.options={},e.selValue=null,e}return Object(u["a"])(t,e),Object(c["a"])(t,[{key:"restForm",value:function(){this.loading=!1,this.options={},this.selValue=null}},{key:"remoteQuery",value:function(e){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:if(this.loading=!0,""===e){t.next=20;break}if("video"!==this.type){t.next=8;break}return t.next=5,regeneratorRuntime.awrap(Object(T["b"])(void 0,{filename:e,type:"001002",auditStatus:"002003"}));case 5:this.options=t.sent,t.next=18;break;case 8:if("doc"!==this.type){t.next=14;break}return t.next=11,regeneratorRuntime.awrap(Object(T["b"])(void 0,{filename:e,type:"001003"}));case 11:this.options=t.sent,t.next=18;break;case 14:if("work"!==this.type){t.next=18;break}return t.next=17,regeneratorRuntime.awrap(Object($["d"])({title:e},void 0));case 17:this.options=t.sent;case 18:t.next=21;break;case 20:this.options={};case 21:this.loading=!1;case 22:case"end":return t.stop()}}),null,this)}},{key:"handleSelect",value:function(e){console.log(e)}},{key:"handleCancel",value:function(){this.syncDialogVisible=!1}},{key:"handleSubmit",value:function(){var e=this;"video"===this.type||"doc"===this.type?this.$emit("onSelected",{type:this.type,value:this.options.items.filter((function(t){return t.id===e.selValue}))[0]}):"work"===this.type&&this.$emit("onSelected",{type:this.type,value:this.options.items.filter((function(t){return t.workId===e.selValue}))[0]}),this.syncDialogVisible=!1}}]),t}(d["e"]);l["a"]([Object(d["d"])("dialogVisible",{type:Boolean,default:!1})],N.prototype,"syncDialogVisible",void 0),l["a"]([Object(d["c"])({required:!0,type:String,default:""})],N.prototype,"type",void 0),l["a"]([Object(d["c"])({required:!0,type:String,default:""})],N.prototype,"title",void 0),N=l["a"]([Object(d["a"])({name:"OutlineSelectDialog",components:{CourseAddTypeItem:C["a"]}})],N);var A=N,P=A,B=(n("aa37"),Object(w["a"])(P,S,_,!1,null,"4c6b412a",null)),V=B.exports,E=n("d828");j.a.locale("zh-cn");var q=function(e){function t(e){var n;return Object(i["a"])(this,t),n=Object(s["a"])(this,Object(o["a"])(t).call(this,e)),n.defaultProps={children:"teachPlanTreeNodes",label:"pname"},n.mediaDialogVisible=!1,n.curSelectNode={},n.selectType="",n.selectTypeTitle="",n.outlineData={courseId:n.courseBaseId,mediaType:"",pname:"",teachPlanTreeNodes:[]},n}return Object(u["a"])(t,e),Object(c["a"])(t,[{key:"restSelectedDialog",value:function(){var e=this.$refs["outlineSelectDialog"];e.restForm()}},{key:"getList",value:function(){var e;return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:if(0==this.courseBaseId){t.next=6;break}return t.next=3,regeneratorRuntime.awrap(Object(b["f"])(this.courseBaseId));case 3:e=t.sent,e&&(e.teachPlanTreeNodes=e.map((function(e){return e.ctlEditTitle=!1,e.ctlBarShow=!1,null!==e.teachPlanTreeNodes&&(e.teachPlanTreeNodes=e.teachPlanTreeNodes.map((function(e){return e.ctlEditTitle=!1,e.ctlBarShow=!1,e}))),e}))),this.outlineData=e;case 6:case"end":return t.stop()}}),null,this)}},{key:"handleEditTitle",value:function(e){e.ctlEditTitle=!0}},{key:"handleEditTitleBlue",value:function(e){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(Object(b["q"])(e));case 2:e.ctlEditTitle=!1;case 3:case"end":return t.stop()}}))}},{key:"handleAddChapter",value:function(){var e;return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return e={courseId:this.courseBaseId,parentid:0,grade:1,pname:"新章名称 [点击修改]"},t.next=3,regeneratorRuntime.awrap(Object(b["q"])(e));case 3:this.getList();case 4:case"end":return t.stop()}}),null,this)}},{key:"handleAddSection",value:function(e,t){var n;return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return n={courseId:this.courseBaseId,parentid:t,grade:2,pname:"新小节名称 [点击修改]"},e.next=3,regeneratorRuntime.awrap(Object(b["q"])(n));case 3:this.getList();case 4:case"end":return e.stop()}}),null,this)}},{key:"handleDeleteNode",value:function(e){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,regeneratorRuntime.awrap(this.showDeleteConfirm());case 3:return t.next=5,regeneratorRuntime.awrap(Object(b["c"])(e));case 5:this.getList(),t.next=10;break;case 8:t.prev=8,t.t0=t["catch"](0);case 10:case"end":return t.stop()}}),null,this,[[0,8]])}},{key:"moveUP",value:function(e){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,regeneratorRuntime.awrap(Object(b["l"])(e));case 3:this.getList(),t.next=8;break;case 6:t.prev=6,t.t0=t["catch"](0);case 8:case"end":return t.stop()}}),null,this,[[0,6]])}},{key:"moveDown",value:function(e){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,regeneratorRuntime.awrap(Object(b["k"])(e));case 3:this.getList(),t.next=8;break;case 6:t.prev=6,t.t0=t["catch"](0);case 8:case"end":return t.stop()}}),null,this,[[0,6]])}},{key:"handleChangeIsPreview",value:function(e){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(Object(b["q"])(e));case 2:case"end":return t.stop()}}))}},{key:"handleChangePublishTime",value:function(e){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(Object(b["q"])(e));case 2:case"end":return t.stop()}}))}},{key:"handleSelectWork",value:function(e){this.restSelectedDialog(),this.selectType="work",this.selectTypeTitle="选择作业",this.mediaDialogVisible=!0,this.curSelectNode=e}},{key:"handleSelectVideo",value:function(e){this.restSelectedDialog(),this.selectType="video",this.selectTypeTitle="选择视频",this.mediaDialogVisible=!0,this.curSelectNode=e}},{key:"handleSelectDoc",value:function(e){this.restSelectedDialog(),this.selectType="doc",this.selectTypeTitle="选择文档",this.mediaDialogVisible=!0,this.curSelectNode=e}},{key:"onRecvSelectedValue",value:function(e){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:if("video"!==e.type&&"doc"!==e.type){t.next=5;break}return t.next=3,regeneratorRuntime.awrap(Object(b["i"])(e.value.id,e.value.filename,this.curSelectNode.id));case 3:t.next=8;break;case 5:if("work"!==e.type){t.next=8;break}return t.next=8,regeneratorRuntime.awrap(Object(b["s"])(this.curSelectNode.teachPlanId,e.value.workId,e.value.title));case 8:this.getList();case 9:case"end":return t.stop()}}),null,this)}},{key:"handleDeleteMedia",value:function(e){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log(e),t.prev=1,void 0!==e.teachplanMedia&&void 0!==e.teachplanMedia.teachplanId){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,regeneratorRuntime.awrap(this.showDeleteConfirm());case 6:return t.next=8,regeneratorRuntime.awrap(Object(b["j"])(e.teachplanMedia.teachplanId,e.teachplanMedia.mediaId,this.courseBaseId));case 8:this.getList(),t.next=13;break;case 11:t.prev=11,t.t0=t["catch"](1);case 13:case"end":return t.stop()}}),null,this,[[1,11]])}},{key:"handleDeleteWork",value:function(e){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,void 0!==e.work&&void 0!==e.work.teachplanWorkId){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,regeneratorRuntime.awrap(this.showDeleteConfirm());case 5:return t.next=7,regeneratorRuntime.awrap(Object(b["t"])(e.work.teachplanWorkId,this.courseBaseId));case 7:this.getList(),t.next=12;break;case 10:t.prev=10,t.t0=t["catch"](0);case 12:case"end":return t.stop()}}),null,this,[[0,10]])}}]),t}(Object(R["c"])(E["a"]));l["a"]([Object(d["c"])({type:Number})],q.prototype,"courseBaseId",void 0),l["a"]([Object(d["c"])({type:String})],q.prototype,"teachmode",void 0),q=l["a"]([Object(d["a"])({name:"CourseAddStep2Outline",components:{OutlineSelectDialog:V},filters:{status:function(e){var t="203001"==e?"未发布":"已发布";return t},dateFmt:function(e){return j()(e).format("YYYY年MM月DD日 HH:mm")},endDateFmt:function(e){return j()(e).format("HH:mm")}}})],q);var M=q,U=M,L=(n("67ef"),n("509c"),Object(w["a"])(U,D,O,!1,null,"72fb0982",null)),F=L.exports,z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"step-body"},[n("div",{staticClass:"banner"},[n("el-button",{staticClass:"btn-add el-button",attrs:{type:"primary",size:"medium"},on:{click:e.handleAdd}},[e._v("+添加教师")])],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticClass:"dataList",staticStyle:{width:"100%"},attrs:{data:e.listData,border:"","header-cell-style":{textAlign:"center"}}},[n("el-table-column",{attrs:{prop:"teacherName",label:"教师名称",align:"center",width:"100"}}),n("el-table-column",{attrs:{prop:"position",label:"教师职位",align:"center",width:"100"}}),n("el-table-column",{attrs:{prop:"introduction",label:"教师简介",width:"600"}}),n("el-table-column",{attrs:{label:"教师照片",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(e){return[n("img",{attrs:{src:e.row.photograph,alt:e.row.teacherName,width:"90"}})]}}])}),n("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text"},on:{click:function(n){return e.handleEdit(t.row)}}},[e._v("编辑")]),n("el-button",{attrs:{type:"text"},on:{click:function(n){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),n("SaveTeacherDialog",{ref:"dialog",attrs:{dialogVisible:e.isDialogVisible,teacherData:e.teacherData},on:{"update:dialogVisible":function(t){e.isDialogVisible=t},"update:dialog-visible":function(t){e.isDialogVisible=t},complete:e.getList}})],1)},H=[],G=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:"课程教师",visible:e.syncDialogVisible},on:{"update:visible":function(t){e.syncDialogVisible=t}}},[n("div",{staticClass:"form-dialog"},[n("el-form",{ref:"form",attrs:{model:e.teacherData,rules:e.rules,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"教师姓名：",prop:"teacherName"}},[n("el-input",{model:{value:e.teacherData.teacherName,callback:function(t){e.$set(e.teacherData,"teacherName",t)},expression:"teacherData.teacherName"}})],1),n("el-form-item",{attrs:{label:"教师职位：",prop:"position"}},[n("el-input",{model:{value:e.teacherData.position,callback:function(t){e.$set(e.teacherData,"position",t)},expression:"teacherData.position"}})],1),n("el-form-item",{attrs:{label:"教师简介：",prop:"introduction"}},[n("el-input",{attrs:{type:"textarea",rows:3},model:{value:e.teacherData.introduction,callback:function(t){e.$set(e.teacherData,"introduction",t)},expression:"teacherData.introduction"}})],1),n("el-form-item",{attrs:{label:"教师照片：",prop:"photograph"}},[n("common-entering-step2-upload-image",{attrs:{imageUrl:e.teacherData.photograph},on:{"update:imageUrl":function(t){return e.$set(e.teacherData,"photograph",t)},"update:image-url":function(t){return e.$set(e.teacherData,"photograph",t)}}},[e._v(" 图片要求 "),n("br"),e._v("尺寸大于500*900 分辨率不小于96dpi ")])],1)],1)],1),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.handleCancel}},[e._v("取消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("提交")])],1)])},Y=[],W=function(e){function t(){var e;return Object(i["a"])(this,t),e=Object(s["a"])(this,Object(o["a"])(t).apply(this,arguments)),e.rules={teacherName:[{required:!0,message:"请输入姓名",trigger:"blur"}],position:[{required:!0,message:"请输入职位",trigger:"blur"}]},e}return Object(u["a"])(t,e),Object(c["a"])(t,[{key:"restForm",value:function(){var e=this.$refs["form"];e.resetFields()}},{key:"validateForm",value:function(){var e=this;return new Promise((function(t){var n=e.$refs["form"];n.validate((function(e){return t(e)}))}))}},{key:"handleCancel",value:function(){this.syncDialogVisible=!1,this.restForm()}},{key:"handleSubmit",value:function(){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(this.validateForm());case 2:if(!e.sent){e.next=9;break}return this.teacherData.photograph&&(this.teacherData.photograph=this.teacherData.photograph.replace("".concat("http://www.yefan.xyz"),"")),e.next=6,regeneratorRuntime.awrap(Object(b["r"])(this.teacherData));case 6:this.syncDialogVisible=!1,this.restForm(),this.$emit("complete");case 9:case"end":return e.stop()}}),null,this)}}]),t}(d["e"]);l["a"]([Object(d["d"])("dialogVisible",{type:Boolean,default:!1})],W.prototype,"syncDialogVisible",void 0),l["a"]([Object(d["c"])()],W.prototype,"teacherData",void 0),W=l["a"]([Object(d["a"])({name:"SaveTeacherDialog",components:{CommonEnteringStep2UploadImage:v["a"]}})],W);var J=W,Q=J,X=(n("c504"),Object(w["a"])(Q,G,Y,!1,null,"cb63d3ca",null)),K=X.exports,Z=function(e){function t(){var e;return Object(i["a"])(this,t),e=Object(s["a"])(this,Object(o["a"])(t).apply(this,arguments)),e.listData=[],e.listLoading=!1,e.isDialogVisible=!1,e.teacherData={courseId:e.courseBaseId,teacherName:"",position:"",introduction:""},e}return Object(u["a"])(t,e),Object(c["a"])(t,[{key:"getList",value:function(){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return this.listLoading=!0,e.next=3,regeneratorRuntime.awrap(Object(b["g"])(this.courseBaseId));case 3:this.listData=e.sent,this.listLoading=!1;case 5:case"end":return e.stop()}}),null,this)}},{key:"handleAdd",value:function(){this.teacherData={courseId:this.courseBaseId,teacherName:"",position:"",introduction:""},this.isDialogVisible=!0}},{key:"handleEdit",value:function(e){this.teacherData=e,this.isDialogVisible=!0}},{key:"handleDelete",value:function(e){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,regeneratorRuntime.awrap(this.showDeleteConfirm());case 3:return t.next=5,regeneratorRuntime.awrap(Object(b["d"])(this.courseBaseId,e.id));case 5:return t.next=7,regeneratorRuntime.awrap(this.getList());case 7:t.next=11;break;case 9:t.prev=9,t.t0=t["catch"](0);case 11:case"end":return t.stop()}}),null,this,[[0,9]])}}]),t}(Object(R["c"])(E["a"]));l["a"]([Object(d["c"])({type:Number})],Z.prototype,"courseBaseId",void 0),Z=l["a"]([Object(d["a"])({name:"CourseAddStep3Teacher",components:{SaveTeacherDialog:K}})],Z);var ee=Z,te=ee,ne=(n("72e4"),Object(w["a"])(te,z,H,!1,null,"712f6205",null)),ae=ne.exports,re=function(e){function t(){var e;return Object(i["a"])(this,t),e=Object(s["a"])(this,Object(o["a"])(t).call(this)),e.courseBaseId=0,e.teachmode="",e.stepsActive=0,e.title="录播课程",e}return Object(u["a"])(t,e),Object(c["a"])(t,[{key:"created",value:function(){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:void 0!==this.$route.query["teachmode"]&&(this.teachmode=String(this.$route.query["teachmode"]),"200003"===this.teachmode&&(this.title="直播课程")),void 0!==this.$route.query["courseBaseId"]?(this.courseBaseId=Number(this.$route.query["courseBaseId"]),this.title+="-修改"):this.title+="-新增";case 2:case"end":return e.stop()}}),null,this)}},{key:"mounted",value:function(){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(this.$refs["step1"].getData());case 2:case"end":return e.stop()}}),null,this)}},{key:"handlePrev",value:function(){this.stepsActive-=1}},{key:"handleNext",value:function(){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:if(0!=this.stepsActive){e.next=8;break}return e.next=3,regeneratorRuntime.awrap(this.$refs["step1"].saveData());case 3:return e.next=5,regeneratorRuntime.awrap(this.$refs["step2"].getList());case 5:this.stepsActive+=1,e.next=15;break;case 8:if(1!=this.stepsActive){e.next=14;break}return e.next=11,regeneratorRuntime.awrap(this.$refs["step3"].getList());case 11:this.stepsActive+=1,e.next=15;break;case 14:2==this.stepsActive&&this.$router.push({path:"/organization/course-list"});case 15:case"end":return e.stop()}}),null,this)}}]),t}(d["e"]);re=l["a"]([Object(d["a"])({name:"CourseAdd",components:{CourseAddStep1BaseInfo:k,CourseAddStep2Outline:F,CourseAddStep3Teacher:ae}})],re);var ie=re,ce=ie,se=(n("a3c5"),Object(w["a"])(ce,a,r,!1,null,"1c6d25b8",null));t["default"]=se.exports},c422:function(e,t,n){e.exports=n.p+"img/icon_luboke@2x.c44712d9.png"},c504:function(e,t,n){"use strict";var a=n("a1f3"),r=n.n(a);r.a},c910:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"d",(function(){return i})),n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return s}));n("d3b7"),n("96cf");var a=n("b32d"),r={question:"",title:""};function i(){var e,t,n,r,i=arguments;return regeneratorRuntime.async((function(c){while(1)switch(c.prev=c.next){case 0:return e=i.length>0&&void 0!==i[0]?i[0]:void 0,t=i.length>1&&void 0!==i[1]?i[1]:void 0,c.next=4,regeneratorRuntime.awrap(Object(a["a"])("/teaching/work/list","post",e,t));case 4:return n=c.sent,r=n.data,c.abrupt("return",r);case 7:case"end":return c.stop()}}))}function c(e){var t,n;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(Object(a["a"])("/teaching/work","post",null,e));case 2:return t=r.sent,n=t.data,r.abrupt("return",n);case 5:case"end":return r.stop()}}))}function s(e){var t,n;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(Object(a["a"])("/teaching/work/".concat(e),"delete"));case 2:return t=r.sent,n=t.data,r.abrupt("return",n);case 5:case"end":return r.stop()}}))}},d4ac:function(e,t,n){},d784:function(e,t,n){"use strict";var a=n("9112"),r=n("6eeb"),i=n("d039"),c=n("b622"),s=n("9263"),o=c("species"),u=!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),l=!i((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));e.exports=function(e,t,n,d){var p=c(e),h=!i((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),f=h&&!i((function(){var t=!1,n=/a/;return"split"===e&&(n={},n.constructor={},n.constructor[o]=function(){return n},n.flags="",n[p]=/./[p]),n.exec=function(){return t=!0,null},n[p](""),!t}));if(!h||!f||"replace"===e&&!u||"split"===e&&!l){var b=/./[p],v=n(p,""[e],(function(e,t,n,a,r){return t.exec===s?h&&!r?{done:!0,value:b.call(t,n,a)}:{done:!0,value:e.call(n,t,a)}:{done:!1}})),m=v[0],g=v[1];r(String.prototype,e,m),r(RegExp.prototype,p,2==t?function(e,t){return g.call(e,this,t)}:function(e){return g.call(e,this)}),d&&a(RegExp.prototype[p],"sham",!0)}}},d81d:function(e,t,n){"use strict";var a=n("23e7"),r=n("b727").map,i=n("1dde");a({target:"Array",proto:!0,forced:!i("map")},{map:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},d828:function(e,t,n){"use strict";n("d3b7"),n("96cf");var a=n("9f12"),r=n("53fe"),i=n("8b83"),c=n("c65a"),s=n("c03e"),o=n("9ab4"),u=n("60a3"),l=function(e){function t(){return Object(a["a"])(this,t),Object(i["a"])(this,Object(c["a"])(t).apply(this,arguments))}return Object(s["a"])(t,e),Object(r["a"])(t,[{key:"showDeleteConfirm",value:function(){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),null,this)}},{key:"showConfirm",value:function(e){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.$confirm(e,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),null,this)}},{key:"showMessageBox",value:function(e,t){this.$alert(e,t)}},{key:"showMessage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";this.$message({message:e,type:t})}}]),t}(u["e"]);l=o["a"]([Object(u["a"])({name:"Mixin"})],l);var d,p,h=l,f=h,b=n("2877"),v=Object(b["a"])(f,d,p,!1,null,null,null);t["a"]=v.exports},ecf5:function(e,t,n){}}]);
//# sourceMappingURL=chunk-aed5076a.3e731921.js.map