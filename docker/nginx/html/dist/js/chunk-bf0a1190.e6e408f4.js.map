{"version":3,"sources":["webpack:///./src/module-personal/pages/change-password/components/change-password-step2-setting-password.vue?1202","webpack:///./src/module-personal/pages/change-password/index.vue?3a5a","webpack:///./src/module-personal/pages/change-password/components/change-password-step1-verify-phone.vue?5e9c","webpack:///./src/module-personal/pages/change-password/components/change-password-step1-verify-phone.vue?efff","webpack:///./src/module-personal/pages/change-password/components/change-password-step1-verify-phone.vue?5237","webpack:///./src/module-personal/pages/change-password/components/change-password-step1-verify-phone.vue","webpack:///./src/module-personal/pages/change-password/components/change-password-step2-setting-password.vue?08a3","webpack:///./src/module-personal/pages/change-password/components/change-password-step2-setting-password.vue?5a00","webpack:///./src/module-personal/pages/change-password/components/change-password-step2-setting-password.vue?06fa","webpack:///./src/module-personal/pages/change-password/components/change-password-step2-setting-password.vue","webpack:///./src/module-personal/pages/change-password/components/change-password-step3-finish.vue?d8ba","webpack:///./src/module-personal/pages/change-password/components/change-password-step3-finish.vue?5f5d","webpack:///./src/module-personal/pages/change-password/components/change-password-step3-finish.vue?da76","webpack:///./src/module-personal/pages/change-password/components/change-password-step3-finish.vue","webpack:///./src/module-personal/pages/change-password/index.vue?71f7","webpack:///./src/module-personal/pages/change-password/index.vue?aef0","webpack:///./src/module-personal/pages/change-password/index.vue","webpack:///./src/module-personal/pages/change-password/index.vue?f30e","webpack:///./src/module-personal/pages/change-password/components/change-password-step3-finish.vue?1582","webpack:///./src/api/learning-user.ts","webpack:///./src/module-personal/pages/change-password/components/change-password-step1-verify-phone.vue?ebe6","webpack:///./src/api/common.ts"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_m","directives","name","rawName","value","stepsActive","expression","ref","on","handleFormInfo","attrs","phone","verifyToken","handlePrev","_v","_e","handleNext","staticRenderFns","form","rules","_s","_f","model","callback","$$v","$set","isSending","smsMsg","buttonTips","TIME_COUNT","sendTimer","sendCount","verifyCode","verifyKey","required","message","trigger","setInterval","clearInterval","Promise","resolve","reject","$refs","validate","isValid","async","$emit","component","password","confirmPwd","validatePassword","rule","Error","validateField","validateConfirmPwd","validator","type","String","default","verify","changePwd","$router","push","path","formInfo","components","ChangePasswordStep1VerifyPhone","ChangePasswordStep2SettingPassword","ChangePasswordStep3Finish","params","data","body","undefined","register","getQnParams"],"mappings":"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","file":"js/chunk-bf0a1190.e6e408f4.js","sourcesContent":["import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./change-password-step2-setting-password.vue?vue&type=style&index=0&id=19ce2f68&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./change-password-step2-setting-password.vue?vue&type=style&index=0&id=19ce2f68&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"personal-content pull-right\"},[_c('div',{staticClass:\"set-cant\"},[_vm._m(0),_c('div',{staticClass:\"pho-cont-one\"},[_vm._m(1),_c('div',{staticClass:\"body\"},[_c('change-password-step1-verify-phone',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.stepsActive === 0),expression:\"stepsActive === 0\"}],ref:\"step1\",on:{\"formInfo\":_vm.handleFormInfo}}),_c('change-password-step2-setting-password',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.stepsActive === 1),expression:\"stepsActive === 1\"}],ref:\"step2\",attrs:{\"phone\":_vm.phone,\"verifyToken\":_vm.verifyToken}}),_c('change-password-step3-finish',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.stepsActive === 2),expression:\"stepsActive === 2\"}],ref:\"step3\"})],1),_c('div',{staticClass:\"footer\"},[(_vm.stepsActive === 1)?_c('el-button',{on:{\"click\":_vm.handlePrev}},[_vm._v(\"上一步\")]):_vm._e(),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleNext}},[(_vm.stepsActive === 0)?[_vm._v(\"下一步\")]:(_vm.stepsActive === 1)?[_vm._v(\"下一步\")]:[_vm._v(\"返回首页\")]],2)],1)])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"top\"},[_c('div',{staticClass:\"tit\"},[_c('span',[_c('em',[_vm._v(\"当前位置:\")]),_vm._v(\" 个人中心 > 修改密码 \")])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"step-box\"},[_c('span',{staticClass:\"start\"},[_c('em',[_vm._v(\"1\")]),_c('i',[_vm._v(\"验证身份\")])]),_c('span',{staticClass:\"no-start\"},[_c('em',[_vm._v(\"2\")]),_c('i',[_vm._v(\"设置密码\")])]),_c('span',{staticClass:\"no-start\"},[_c('em',[_vm._v(\"3\")]),_c('i',[_vm._v(\"完成\")])])])}]\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"step-body\"},[_c('el-form',{ref:\"form\",staticClass:\"form\",attrs:{\"model\":_vm.form,\"rules\":_vm.rules,\"label-width\":\"100px\",\"size\":\"small\"}},[_c('el-form-item',{attrs:{\"label\":\"验证方式：\"}},[_c('el-row',{attrs:{\"gutter\":10,\"justify\":\"space-between\"}},[_c('el-col',{attrs:{\"span\":7}},[_vm._v(\"手机验证（\"+_vm._s(_vm._f(\"phoneFormat\")(_vm.form.phone))+\"）\")])],1)],1),_c('el-form-item',{attrs:{\"label\":\"验证码：\",\"prop\":\"verifyCode\"}},[_c('el-row',{attrs:{\"gutter\":10,\"justify\":\"space-between\"}},[_c('el-col',{attrs:{\"span\":7}},[_c('el-input',{attrs:{\"placeholder\":\"\"},model:{value:(_vm.form.verifyCode),callback:function ($$v) {_vm.$set(_vm.form, \"verifyCode\", $$v)},expression:\"form.verifyCode\"}})],1),_c('el-col',{attrs:{\"span\":4}},[_c('el-button',{staticClass:\"verify-button\",attrs:{\"type\":\"primary\",\"disabled\":_vm.isSending},on:{\"click\":_vm.smsMsg}},[_vm._v(_vm._s(_vm.buttonTips))])],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Component, Vue } from 'vue-property-decorator'\r\nimport { Form as ElForm } from 'element-ui'\r\nimport { smsMsg } from '@/api/common'\r\nimport { verify } from '@/api/learning-user'\r\nimport { UserModule } from '@/store/modules/user'\r\n\r\nconst TIME_COUNT = 90\r\n@Component\r\nexport default class ChangePasswordStep1VerifyPhone extends Vue {\r\n  // 验证码\r\n  private isSending: boolean = false\r\n  private sendTimer: number = 0\r\n  private sendCount: number = 0\r\n  // 表单数据\r\n  private form: any = {\r\n    phone: '',\r\n    verifyCode: '',\r\n    verifyKey: ''\r\n  }\r\n  // 表单验证\r\n  private rules: any = {\r\n    verifyCode: [{ required: true, message: '请填写验证码', trigger: 'change' }]\r\n  }\r\n  // computed\r\n  get buttonTips() {\r\n    if (!this.isSending) {\r\n      return '获取验证码'\r\n    }\r\n    return `${this.sendCount}s`\r\n  }\r\n\r\n  /**\r\n   * 生命周期钩子\r\n   */\r\n  created() {\r\n    this.form.phone = UserModule.name\r\n  }\r\n\r\n  /**\r\n   * 发送短信验证码\r\n   */\r\n  private async smsMsg() {\r\n    this.isSending = true\r\n    this.sendCount = TIME_COUNT\r\n    this.form.verifyKey = await smsMsg(this.form.phone)\r\n\r\n    this.sendTimer = setInterval(() => {\r\n      if (this.sendCount > 0) {\r\n        this.sendCount--\r\n      } else {\r\n        clearInterval(this.sendTimer)\r\n        this.isSending = false\r\n      }\r\n    }, 1000)\r\n  }\r\n\r\n  /**\r\n   * 验证短信验证码\r\n   */\r\n  public async verify(): Promise<boolean> {\r\n    return new Promise((resolve, reject) => {\r\n      let form = this.$refs['form'] as ElForm\r\n      form.validate(async (isValid: boolean) => {\r\n        if (isValid) {\r\n          let verifyToken: string = await verify(this.form)\r\n          this.$emit('formInfo', {\r\n            phone: this.form.phone,\r\n            verifyToken: verifyToken\r\n          })\r\n          resolve()\r\n        } else {\r\n          reject()\r\n        }\r\n      })\r\n    })\r\n  }\r\n}\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./change-password-step1-verify-phone.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./change-password-step1-verify-phone.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./change-password-step1-verify-phone.vue?vue&type=template&id=5c0276ad&scoped=true&\"\nimport script from \"./change-password-step1-verify-phone.vue?vue&type=script&lang=ts&\"\nexport * from \"./change-password-step1-verify-phone.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./change-password-step1-verify-phone.vue?vue&type=style&index=0&id=5c0276ad&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5c0276ad\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"step-body\"},[_c('el-form',{ref:\"form\",staticClass:\"form\",attrs:{\"model\":_vm.form,\"rules\":_vm.rules,\"label-width\":\"110px\",\"size\":\"mini\"}},[_c('el-form-item',{attrs:{\"label\":\"新密码：\",\"prop\":\"password\"}},[_c('el-row',{attrs:{\"gutter\":10}},[_c('el-col',{attrs:{\"span\":6}},[_c('el-input',{attrs:{\"placeholder\":\"\"},model:{value:(_vm.form.password),callback:function ($$v) {_vm.$set(_vm.form, \"password\", $$v)},expression:\"form.password\"}})],1)],1)],1),_c('el-form-item',{attrs:{\"label\":\"验证新密码：\",\"prop\":\"confirmPwd\"}},[_c('el-row',{attrs:{\"gutter\":10}},[_c('el-col',{attrs:{\"span\":6}},[_c('el-input',{attrs:{\"placeholder\":\"\"},model:{value:(_vm.form.confirmPwd),callback:function ($$v) {_vm.$set(_vm.form, \"confirmPwd\", $$v)},expression:\"form.confirmPwd\"}})],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Component, Vue, Prop } from 'vue-property-decorator'\r\nimport { Form as ElForm } from 'element-ui'\r\nimport { changePwd } from '@/api/learning-user'\r\n\r\n@Component\r\nexport default class ChangePasswordStep2SettingPassword extends Vue {\r\n  @Prop({ required: true, type: String, default: '' })\r\n  phone!: string\r\n  @Prop({ required: true, type: String, default: '' })\r\n  verifyToken!: string\r\n  // 表单数据\r\n  private form: any = {\r\n    phone: '',\r\n    password: '',\r\n    confirmPwd: ''\r\n  }\r\n  // 验证详情\r\n  // TODO: 密码其他校验\r\n  private validatePassword: any = (rule, value, callback) => {\r\n    if (value === '') {\r\n      callback(new Error('请输入密码'))\r\n    } else {\r\n      if (this.form.confirmPwd !== '') {\r\n        let form = this.$refs['form'] as ElForm\r\n        form.validateField('confirmPwd', () => {})\r\n      }\r\n      callback()\r\n    }\r\n  }\r\n  private validateConfirmPwd: any = (rule, value, callback) => {\r\n    if (value === '') {\r\n      callback(new Error('请再次输入密码'))\r\n    } else if (value !== this.form.password) {\r\n      callback(new Error('两次输入密码不一致!'))\r\n    } else {\r\n      callback()\r\n    }\r\n  }\r\n  // 表单验证\r\n  private rules: any = {\r\n    password: [{ validator: this.validatePassword, trigger: 'change' }],\r\n    confirmPwd: [{ validator: this.validateConfirmPwd, trigger: 'change' }]\r\n  }\r\n\r\n  /**\r\n   * 新密码提交\r\n   */\r\n  public async changePwd(): Promise<boolean> {\r\n    return new Promise((resolve, reject) => {\r\n      let form = this.$refs['form'] as ElForm\r\n      form.validate(async (isValid: boolean) => {\r\n        if (isValid) {\r\n          this.form.phone = this.phone\r\n          await changePwd(this.verifyToken, this.form)\r\n          resolve()\r\n        } else {\r\n          reject()\r\n        }\r\n      })\r\n    })\r\n  }\r\n}\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./change-password-step2-setting-password.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./change-password-step2-setting-password.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./change-password-step2-setting-password.vue?vue&type=template&id=19ce2f68&scoped=true&\"\nimport script from \"./change-password-step2-setting-password.vue?vue&type=script&lang=ts&\"\nexport * from \"./change-password-step2-setting-password.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./change-password-step2-setting-password.vue?vue&type=style&index=0&id=19ce2f68&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"19ce2f68\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"step-body\"},[_c('p',{staticClass:\"pho-success\"},[_vm._v(\"恭喜，密码修改成功\")])])}]\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\r\nimport { Component, Vue } from 'vue-property-decorator'\r\n\r\n@Component\r\nexport default class ChangePasswordStep3Finish extends Vue {}\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./change-password-step3-finish.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./change-password-step3-finish.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./change-password-step3-finish.vue?vue&type=template&id=ba8ded46&scoped=true&\"\nimport script from \"./change-password-step3-finish.vue?vue&type=script&lang=ts&\"\nexport * from \"./change-password-step3-finish.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./change-password-step3-finish.vue?vue&type=style&index=0&id=ba8ded46&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ba8ded46\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Component, Vue } from 'vue-property-decorator'\r\nimport ChangePasswordStep1VerifyPhone from './components/change-password-step1-verify-phone.vue'\r\nimport ChangePasswordStep2SettingPassword from './components/change-password-step2-setting-password.vue'\r\nimport ChangePasswordStep3Finish from './components/change-password-step3-finish.vue'\r\n\r\n@Component({\r\n  components: {\r\n    ChangePasswordStep1VerifyPhone,\r\n    ChangePasswordStep2SettingPassword,\r\n    ChangePasswordStep3Finish\r\n  }\r\n})\r\nexport default class ChangePassword extends Vue {\r\n  // 当前step\r\n  private stepsActive: number = 0\r\n\r\n  private phone: string = ''\r\n  private verifyToken: string = ''\r\n\r\n  // 上一页\r\n  private handlePrev() {\r\n    this.stepsActive -= 1\r\n  }\r\n\r\n  // 下一页\r\n  private async handleNext() {\r\n    if (this.stepsActive === 0) {\r\n      await (this.$refs['step1'] as ChangePasswordStep1VerifyPhone).verify()\r\n      this.stepsActive += 1\r\n    } else if (this.stepsActive === 1) {\r\n      await (this.$refs[\r\n        'step2'\r\n      ] as ChangePasswordStep2SettingPassword).changePwd()\r\n      this.stepsActive += 1\r\n    } else {\r\n      this.$router.push({\r\n        path: '/personal/my-course'\r\n      })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 组件之间传值\r\n   * TODO: 使用vuex\r\n   */\r\n  private handleFormInfo(formInfo: any) {\r\n    this.phone = formInfo.phone\r\n    this.verifyToken = formInfo.verifyToken\r\n  }\r\n}\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=5101b87d&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=ts&\"\nexport * from \"./index.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=5101b87d&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5101b87d\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=5101b87d&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=5101b87d&lang=scss&scoped=true&\"","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./change-password-step3-finish.vue?vue&type=style&index=0&id=ba8ded46&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./change-password-step3-finish.vue?vue&type=style&index=0&id=ba8ded46&lang=scss&scoped=true&\"","import { createAPI } from '@/utils/request'\r\nimport { IUserInfo } from '@/entity/user-login'\r\n\r\n// 验证手机 验证码\r\nexport async function verify(params: any): Promise<string> {\r\n  const { data } = await createAPI(\r\n    '/learning/xcUser/changePwd/verify',\r\n    'post',\r\n    params\r\n  )\r\n  return data\r\n}\r\n\r\n// 修改用户密码\r\nexport async function changePwd(\r\n  verifyToken: string,\r\n  body: any\r\n): Promise<boolean> {\r\n  const { data } = await createAPI(\r\n    `/learning/xcUser/changePwd/${verifyToken}`,\r\n    'post',\r\n    undefined,\r\n    body\r\n  )\r\n  return data\r\n}\r\n\r\n// 获取用户的信息（此接口后端老师说不调用）\r\nexport async function profile(userId: number): Promise<IUserInfo> {\r\n  const { data } = await createAPI(`/learning/xcUser/${userId}`, 'get')\r\n  return data\r\n}\r\n\r\n// 用户注册\r\nexport async function register(body: any): Promise<boolean> {\r\n  const { data } = await createAPI('/learning/xcUser', 'post', undefined, body)\r\n  return data\r\n}\r\n","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./change-password-step1-verify-phone.vue?vue&type=style&index=0&id=5c0276ad&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./change-password-step1-verify-phone.vue?vue&type=style&index=0&id=5c0276ad&lang=scss&scoped=true&\"","import { createAPI } from '@/utils/request'\r\nimport { IQnParamsDTO } from '@/entity/media-page-list'\r\n\r\n// 根据申请人手机号获取验证码\r\nexport async function smsMsg(phone: string): Promise<string> {\r\n  const { data } = await createAPI('/content/common/smsMsg', 'get', {\r\n    phone: phone\r\n  })\r\n  return data\r\n}\r\n\r\n// 获取七牛云上传凭证\r\nexport async function getQnParams(): Promise<IQnParamsDTO> {\r\n  const { data } = await createAPI('/content/common/qnUploadToken', 'get')\r\n  return data\r\n}"],"sourceRoot":""}